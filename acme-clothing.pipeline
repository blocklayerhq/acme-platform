
run git clone apprepo {
    src = "https://github.com/atulmy/crate"
}

run fs subtree web {
    src = git.clone.apprepo.tree
    path = "code/web"
}

run npm build web {
    src = fs.subtree.web.tree
    build_script = "build:client"
    build_dir = "public"
}

run netlify deploy web {
    src = npm.build.web.tree
    site-id = "OVERRIDE REQUIRED"
    auth-token = "OVERRIDE REQUIRED"
}

// outputs {
//     deploy_logs = netlify.deploy.web._stdout
// }
